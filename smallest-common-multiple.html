<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Smallest Common Multiple</title>
    <style>
        header {
            background: white;
            padding: 1px 10px 10px 10px;
        }
        code {
            color: blueviolet;
            background: lightgrey;
            padding: 1px;
        }
    </style>
</head>
<body>
    <header>
        <h1>Smallest Common Multiple</h1>
        <p>
            Find the smallest common multiple of the provided parameters that can be evenly divided by both, as well as by all sequential numbers in the range between these parameters.<br>
            The range will be an array of two numbers that will not necessarily be in numerical order.<br>
            e.g. for 1 and 3 - find the smallest common multiple of both 1 and 3 that is evenly divisible by all numbers between 1 and 3.<br>
        </p>
        <ul>
            <li><a href="https://www.mathsisfun.com/least-common-multiple.html">Smallest Common Multiple</a></li>
        </ul>
    </header>
    <script src="simple-test-lib.js"></script>
    <script>

        // smallestCommons([4, 10]) -> 20
        function smallestCommons(arr) {

            var smallNumberMulti = [];
            var largestNumberMulti = [];
            var result;

            if (arr[0] > arr[1]) {
                smallNumberMulti.push(arr[1]);
                largestNumberMulti.push(arr[0]);
            } else {
                smallNumberMulti.push(arr[0]);
                largestNumberMulti.push(arr[1]);
            }

            var range = getRange();
            checkForCommons();

            function checkForCommons() {
                var state = true;

                while (state) {
                    // refactor this two lines of code to be more readable 
                    smallNumberMulti.push(smallNumberMulti[smallNumberMulti.length - 1] + smallNumberMulti[0]);
                    largestNumberMulti.push(largestNumberMulti[largestNumberMulti.length - 1] + largestNumberMulti[0]);

                    for (var i = 0; i < smallNumberMulti.length; i++) {
                        if (largestNumberMulti.indexOf(smallNumberMulti[i]) !== -1) {
                            state = false;
                            isDividedByRange(smallNumberMulti[i]);
                            break;
                        }
                    }
                }
            }

            function getRange() {
                var smallNumber = smallNumberMulti[0];
                var largeNumber = largestNumberMulti[0];
                var rangeArr = [];

                for (var i = smallNumber; i < largeNumber; i++) {
                    rangeArr.push(i);
                }

                return rangeArr;
            }
            
            function isDividedByRange(currentCommon) {

                var counter = 0;

                for (var i = 0; i < range.length; i++) {

                    if (currentCommon % range[i] !== 0) {
                        checkForCommons();
                        break;
                    } else {
                        counter++;
                    }
                }

                if (counter === range.length) {
                        result = currentCommon;
                }

            }

            return result;

        }

        tests({

            // 'It should return a number.': function() {
            //      var testInt = smallestCommons([1, 5]);
            //      eq(typeof testInt, 'number');
            // },

            'It should return 60.': function() {
                debugger;
                 var testInt = smallestCommons([1, 5]);
                 eq(testInt, 60);
            }/*,

            'It should return 60.': function() {
                 var testInt = smallestCommons([5, 1]);
                 eq(testInt, 60);
            },

            'It should return 360360.': function() {
                 var testInt = smallestCommons([1, 13]);
                 eq(testInt, 360360);
            },

            'It should return 6056820.': function() {
                 var testInt = smallestCommons([23, 18]);
                 eq(testInt, 6056820);
            },*/

        });
    </script>
</body>
</html>